# Application Routing

Edge provides routing for a user's Native App instance. There are some
details specific to Flask related to correctly configuring routing
to a running Native App instance.

## Configuring `wsgi`

The `JUPYTERHUB_SERVER_URL` environment variable is provided by Edge for
the native app instance. In this native app example,
the binding information is used to configure the [`wsgi` application](./src/wsgi.py#L43).

## Application Routing

Edge creates a unique path for each user's Native Application instances. This path
is provided to the Native Application instance via the [`JUPYTERHUB_SERVER_NAME`](./src/app.py#L53)` 
environment variable. When a user launches a Native Application instance, the browser
will redirect them to this path on Edge's web domain. The backend needs to serve its 
[root route](./src/app.py#L156) using this path.

There are two important details related to Edge's routing environment.

- The backend's root path must be served without the trailing ``/`` (slash).
  The trailing slash behavior is different in other routing environments. The
  example application [removes the trailing slash](./src/app.py#L148)
  when served by Edge.
- Any paths such as static asset URLs must be served without URI encoding.
  By default, Flask performs URI encoding. The example application handles this by
  [decoding](./src/frontend/templates/index.html#L6) any URLs generated by Flask
  using a [custom Jinja template filter](./src/app.py#L146>).
