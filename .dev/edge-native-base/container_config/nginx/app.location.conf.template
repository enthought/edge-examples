# Templated app.location.conf file. This will be unpacked into /opt/nginx/app.location.conf 
# with the JupyterHub service substituted for the required routes


location ${JUPYTERHUB_SERVICE_PREFIX} { 
    auth_request ${JUPYTERHUB_SERVICE_PREFIX}oauth_status/;
    error_page 401 = @error401;
    proxy_pass http://localhost:9000/;
    proxy_redirect off;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection $connection_upgrade;         
}        